<?php

/**
 * yreviews Block Template.
 */

// Create id attribute allowing for custom "anchor" value.
$id = 'yreviews-' . $block['id'];

if ( !empty($block['anchor']) ) {
    $id = $block['anchor'];
}

// Create class attribute allowing for custom "className" and "align" values.
$className = 'main_reviews_container home_block';
if ( !empty($block['className']) ) {
    $className .= ' ' . $block['className'];
}

if ( !empty($block['align']) ) {
    $className .= ' align' . $block['align'];
}

$title = get_field('title_yreviews');
$video_preview_id = get_field('video_preview_yreviews');
$video = get_field('video_yreviews');
$img_info_id = get_field('img_info_yreviews');
$title_info = get_field('title_info_yreviews');
$desc_info = get_field('desc_info_yreviews');
$link_info = get_field('link_info_yreviews');
?>

<?php if ( !empty( $_POST['query']['preview'] ) ) : ?>

    <figure>
        <img src="<?php echo THEME_URI; ?>'/img/gutenberg-preview/yreviews.png'" alt="Preview" style="width:100%;">
    </figure>

<?php else : ?>

    <div id="<?php echo esc_attr($id); ?>" class="<?php echo esc_attr($className); ?>">  

        <?php if ( $title ) : ?>
            <div class="block_title">
                <h3><?php echo $title; ?></h3> 
            </div>  
        <?php endif; ?>

        <div class="main_reviews"> 

            <div class="col_review">
                <img src="<?php echo THEME_URI; ?>/img/yandex.jpg" alt="Yandex">
            </div>

            <div class="col_right">

                <div class="reviews_video">
                    <div class="video-container">
                        <div class="video-wrapper">

                            <?php if ( $video ) : ?>
                                <iframe id="video-iframe" 
                                        width="560" 
                                        height="300" 
                                        src="<?php echo $video; ?>" 
                                        frameborder="0" 
                                        allow="autoplay; encrypted-media" 
                                        allowfullscreen></iframe>
                            <?php endif; ?>

                            <?php 
                            if ( $video_preview_id ) : 
                                $video_preview_url = wp_get_attachment_url( $video_preview_id, 'full' );
                            ?>
                                <img class="video-placeholder" src="<?php echo esc_attr($video_preview_url); ?>" alt="Video Placeholder">
                            <?php endif; ?>

                        </div>
                        <div class="overlay"></div>
                        <div class="play-button">
                            <svg width="141" height="94" viewBox="0 0 141 94" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.227 79.8079H9.96919C9.9048 79.4376 9.78607 79.1096 9.61302 78.8239C9.43996 78.5341 9.22464 78.2886 8.96706 78.0874C8.70949 77.8861 8.41569 77.7352 8.08567 77.6346C7.75968 77.5299 7.40752 77.4776 7.02921 77.4776C6.3571 77.4776 5.76145 77.6467 5.24228 77.9847C4.7231 78.3188 4.31661 78.8098 4.02282 79.4577C3.72902 80.1017 3.58212 80.8885 3.58212 81.8182C3.58212 82.764 3.72902 83.5608 4.02282 84.2088C4.32064 84.8527 4.72712 85.3397 5.24228 85.6697C5.76145 85.9957 6.35508 86.1587 7.02317 86.1587C7.39344 86.1587 7.73955 86.1104 8.06152 86.0138C8.38752 85.9132 8.6793 85.7663 8.93688 85.5732C9.19848 85.38 9.41782 85.1425 9.5949 84.8608C9.77601 84.5791 9.90078 84.2571 9.96919 83.8949L12.227 83.907C12.1425 84.4946 11.9594 85.0459 11.6776 85.5611C11.3999 86.0762 11.0357 86.531 10.585 86.9254C10.1342 87.3158 9.60698 87.6217 9.00329 87.843C8.39959 88.0604 7.72949 88.169 6.99299 88.169C5.90634 88.169 4.93641 87.9175 4.08319 87.4144C3.22997 86.9113 2.55785 86.1849 2.06685 85.2351C1.57585 84.2853 1.33034 83.1463 1.33034 81.8182C1.33034 80.486 1.57786 79.3471 2.07289 78.4013C2.56792 77.4515 3.24204 76.725 4.09526 76.2219C4.94848 75.7189 5.91439 75.4673 6.99299 75.4673C7.6812 75.4673 8.32111 75.5639 8.91273 75.7571C9.50435 75.9503 10.0316 76.234 10.4944 76.6083C10.9572 76.9786 11.3376 77.4334 11.6354 77.9727C11.9372 78.5079 12.1344 79.1197 12.227 79.8079ZM19.5181 85.4585L22.271 78.7273H24.0337L20.2848 88H18.7575L15.093 78.7273H16.8377L19.5181 85.4585ZM16.2884 78.7273V88H14.1815V78.7273H16.2884ZM22.8384 88V78.7273H24.9272V88H22.8384ZM31.1754 88.1811C30.2699 88.1811 29.4851 87.9819 28.821 87.5835C28.157 87.185 27.6418 86.6276 27.2756 85.9112C26.9134 85.1948 26.7322 84.3577 26.7322 83.3999C26.7322 82.442 26.9134 81.6029 27.2756 80.8825C27.6418 80.162 28.157 79.6026 28.821 79.2042C29.4851 78.8058 30.2699 78.6065 31.1754 78.6065C32.081 78.6065 32.8658 78.8058 33.5298 79.2042C34.1939 79.6026 34.707 80.162 35.0692 80.8825C35.4355 81.6029 35.6186 82.442 35.6186 83.3999C35.6186 84.3577 35.4355 85.1948 35.0692 85.9112C34.707 86.6276 34.1939 87.185 33.5298 87.5835C32.8658 87.9819 32.081 88.1811 31.1754 88.1811ZM31.1875 86.4304C31.6785 86.4304 32.089 86.2956 32.419 86.0259C32.7491 85.7522 32.9946 85.386 33.1555 84.9272C33.3205 84.4684 33.4031 83.9573 33.4031 83.3938C33.4031 82.8263 33.3205 82.3132 33.1555 81.8544C32.9946 81.3916 32.7491 81.0233 32.419 80.7496C32.089 80.476 31.6785 80.3391 31.1875 80.3391C30.6844 80.3391 30.2659 80.476 29.9318 80.7496C29.6018 81.0233 29.3543 81.3916 29.1893 81.8544C29.0283 82.3132 28.9478 82.8263 28.9478 83.3938C28.9478 83.9573 29.0283 84.4684 29.1893 84.9272C29.3543 85.386 29.6018 85.7522 29.9318 86.0259C30.2659 86.2956 30.6844 86.4304 31.1875 86.4304ZM36.4517 80.5202V78.7273H44.5653V80.5202H41.565V88H39.4521V80.5202H36.4517ZM46.3055 91.4773V78.7273H48.4546V80.2607H48.5814C48.6941 80.0353 48.8531 79.7958 49.0583 79.5423C49.2636 79.2847 49.5413 79.0653 49.8914 78.8842C50.2416 78.6991 50.6883 78.6065 51.2316 78.6065C51.948 78.6065 52.594 78.7897 53.1695 79.1559C53.749 79.5181 54.2078 80.0554 54.5459 80.7678C54.888 81.4761 55.059 82.3454 55.059 83.3757C55.059 84.3939 54.892 85.2592 54.558 85.9716C54.2239 86.6839 53.7691 87.2273 53.1936 87.6016C52.6181 87.9759 51.9661 88.163 51.2377 88.163C50.7064 88.163 50.2657 88.0745 49.9156 87.8974C49.5654 87.7203 49.2837 87.507 49.0704 87.2575C48.8611 87.0039 48.6981 86.7644 48.5814 86.5391H48.4909V91.4773H46.3055ZM48.4486 83.3636C48.4486 83.9633 48.5331 84.4885 48.7021 84.9393C48.8752 85.39 49.1227 85.7422 49.4447 85.9957C49.7707 86.2453 50.1651 86.37 50.6279 86.37C51.1109 86.37 51.5154 86.2412 51.8414 85.9837C52.1673 85.7221 52.4128 85.3659 52.5779 84.9151C52.7469 84.4603 52.8314 83.9432 52.8314 83.3636C52.8314 82.7881 52.7489 82.277 52.5839 81.8303C52.4189 81.3835 52.1734 81.0334 51.8474 80.7798C51.5214 80.5263 51.1149 80.3995 50.6279 80.3995C50.1611 80.3995 49.7646 80.5223 49.4387 80.7678C49.1127 81.0133 48.8651 81.3574 48.6961 81.8001C48.5311 82.2428 48.4486 82.764 48.4486 83.3636ZM61.0356 88.1811C60.1059 88.1811 59.303 87.9879 58.6269 87.6016C57.9548 87.2112 57.4376 86.6598 57.0754 85.9474C56.7132 85.2311 56.532 84.3879 56.532 83.418C56.532 82.4641 56.7132 81.627 57.0754 80.9066C57.4416 80.1822 57.9527 79.6187 58.6088 79.2163C59.2648 78.8098 60.0355 78.6065 60.9209 78.6065C61.4924 78.6065 62.0317 78.6991 62.5388 78.8842C63.0499 79.0653 63.5007 79.3471 63.8911 79.7294C64.2855 80.1117 64.5954 80.5987 64.8208 81.1903C65.0461 81.7779 65.1588 82.4782 65.1588 83.2912V83.9613H57.5583V82.4883H63.064C63.06 82.0697 62.9694 81.6974 62.7923 81.3714C62.6153 81.0414 62.3678 80.7818 62.0498 80.5927C61.7359 80.4035 61.3696 80.3089 60.9511 80.3089C60.5044 80.3089 60.1119 80.4176 59.7739 80.6349C59.4358 80.8482 59.1722 81.13 58.983 81.4801C58.7979 81.8262 58.7033 82.2066 58.6993 82.6211V83.907C58.6993 84.4463 58.7979 84.9091 58.9951 85.2955C59.1923 85.6778 59.468 85.9716 59.8222 86.1768C60.1763 86.3781 60.5909 86.4787 61.0658 86.4787C61.3837 86.4787 61.6715 86.4344 61.9291 86.3459C62.1866 86.2533 62.41 86.1185 62.5992 85.9414C62.7883 85.7643 62.9312 85.545 63.0278 85.2834L65.0683 85.5128C64.9395 86.0521 64.694 86.523 64.3318 86.9254C63.9736 87.3239 63.5148 87.6338 62.9553 87.8551C62.3959 88.0724 61.756 88.1811 61.0356 88.1811ZM66.2349 80.5202V78.7273H74.3485V80.5202H71.3482V88H69.2353V80.5202H66.2349ZM77.5677 81.7457H80.3025C81.4857 81.7457 82.4013 82.0335 83.0493 82.609C83.6972 83.1845 84.0232 83.9392 84.0273 84.8729C84.0232 85.4806 83.8743 86.0199 83.5805 86.4908C83.2907 86.9616 82.8682 87.3319 82.3128 87.6016C81.7614 87.8672 81.0913 88 80.3025 88H76.0887V78.7273H78.1956V86.207H80.3025C80.7774 86.207 81.1678 86.0863 81.4736 85.8448C81.7795 85.5993 81.9324 85.2854 81.9324 84.9031C81.9324 84.5006 81.7795 84.1726 81.4736 83.919C81.1678 83.6655 80.7774 83.5387 80.3025 83.5387H77.5677V81.7457ZM90.117 88V78.7273H94.0108C95.1096 78.7273 95.9769 78.9466 96.6127 79.3853C97.2527 79.824 97.5726 80.4357 97.5726 81.2205C97.5726 81.7397 97.3915 82.1643 97.0293 82.4943C96.6711 82.8203 96.1821 83.0397 95.5623 83.1523C96.0493 83.1926 96.4759 83.3153 96.8422 83.5206C97.2124 83.7259 97.5022 83.9955 97.7115 84.3295C97.9208 84.6636 98.0254 85.0479 98.0254 85.4826C98.0254 85.9937 97.8906 86.4384 97.6209 86.8168C97.3553 87.1911 96.9669 87.4828 96.4558 87.6921C95.9487 87.8974 95.3329 88 94.6085 88H90.117ZM92.1635 86.2795H94.6085C95.0109 86.2795 95.3269 86.1849 95.5563 85.9957C95.7857 85.8026 95.9004 85.541 95.9004 85.2109C95.9004 84.8286 95.7857 84.5288 95.5563 84.3114C95.3269 84.0901 95.0109 83.9794 94.6085 83.9794H92.1635V86.2795ZM92.1635 82.5668H94.0531C94.3509 82.5668 94.6065 82.5245 94.8198 82.44C95.0331 82.3514 95.1961 82.2287 95.3088 82.0717C95.4215 81.9107 95.4778 81.7196 95.4778 81.4982C95.4778 81.1803 95.347 80.9308 95.0854 80.7496C94.8278 80.5685 94.4696 80.478 94.0108 80.478H92.1635V82.5668ZM101.936 85.0419L105.649 78.7273H107.894V88H105.781V81.6793L102.081 88H99.8289V78.7273H101.936V85.0419ZM109.317 90.6925V86.201H110.054C110.251 86.0481 110.416 85.8408 110.549 85.5792C110.682 85.3136 110.79 85.0017 110.875 84.6435C110.964 84.2812 111.036 83.8768 111.092 83.43C111.149 82.9793 111.199 82.4943 111.243 81.9751L111.509 78.7273H118.21V86.201H119.647V90.6925H117.534V88H111.467V90.6925H109.317ZM112.3 86.201H116.121V80.4901H113.404L113.26 81.9751C113.179 82.9571 113.072 83.7983 112.94 84.4986C112.807 85.1989 112.594 85.7663 112.3 86.201ZM125.383 88.1811C124.454 88.1811 123.651 87.9879 122.975 87.6016C122.302 87.2112 121.785 86.6598 121.423 85.9474C121.061 85.2311 120.88 84.3879 120.88 83.418C120.88 82.4641 121.061 81.627 121.423 80.9066C121.789 80.1822 122.3 79.6187 122.956 79.2163C123.612 78.8098 124.383 78.6065 125.269 78.6065C125.84 78.6065 126.379 78.6991 126.886 78.8842C127.398 79.0653 127.848 79.3471 128.239 79.7294C128.633 80.1117 128.943 80.5987 129.168 81.1903C129.394 81.7779 129.506 82.4782 129.506 83.2912V83.9613H121.906V82.4883H127.412C127.408 82.0697 127.317 81.6974 127.14 81.3714C126.963 81.0414 126.715 80.7818 126.397 80.5927C126.084 80.4035 125.717 80.3089 125.299 80.3089C124.852 80.3089 124.46 80.4176 124.122 80.6349C123.783 80.8482 123.52 81.13 123.331 81.4801C123.146 81.8262 123.051 82.2066 123.047 82.6211V83.907C123.047 84.4463 123.146 84.9091 123.343 85.2955C123.54 85.6778 123.816 85.9716 124.17 86.1768C124.524 86.3781 124.939 86.4787 125.413 86.4787C125.731 86.4787 126.019 86.4344 126.277 86.3459C126.534 86.2533 126.758 86.1185 126.947 85.9414C127.136 85.7643 127.279 85.545 127.375 85.2834L129.416 85.5128C129.287 86.0521 129.042 86.523 128.679 86.9254C128.321 87.3239 127.862 87.6338 127.303 87.8551C126.744 88.0724 126.104 88.1811 125.383 88.1811ZM135.4 88.1811C134.494 88.1811 133.71 87.9819 133.046 87.5835C132.382 87.185 131.866 86.6276 131.5 85.9112C131.138 85.1948 130.957 84.3577 130.957 83.3999C130.957 82.442 131.138 81.6029 131.5 80.8825C131.866 80.162 132.382 79.6026 133.046 79.2042C133.71 78.8058 134.494 78.6065 135.4 78.6065C136.306 78.6065 137.09 78.8058 137.754 79.2042C138.419 79.6026 138.932 80.162 139.294 80.8825C139.66 81.6029 139.843 82.442 139.843 83.3999C139.843 84.3577 139.66 85.1948 139.294 85.9112C138.932 86.6276 138.419 87.185 137.754 87.5835C137.09 87.9819 136.306 88.1811 135.4 88.1811ZM135.412 86.4304C135.903 86.4304 136.314 86.2956 136.644 86.0259C136.974 85.7522 137.219 85.386 137.38 84.9272C137.545 84.4684 137.628 83.9573 137.628 83.3938C137.628 82.8263 137.545 82.3132 137.38 81.8544C137.219 81.3916 136.974 81.0233 136.644 80.7496C136.314 80.476 135.903 80.3391 135.412 80.3391C134.909 80.3391 134.49 80.476 134.156 80.7496C133.826 81.0233 133.579 81.3916 133.414 81.8544C133.253 82.3132 133.172 82.8263 133.172 83.3938C133.172 83.9573 133.253 84.4684 133.414 84.9272C133.579 85.386 133.826 85.7522 134.156 86.0259C134.49 86.2956 134.909 86.4304 135.412 86.4304Z" fill="white"/>
                                <circle cx="71" cy="30" r="30" fill="white"/>
                                <path d="M80.5 29.134C81.1667 29.5189 81.1667 30.4811 80.5 30.866L67 38.6603C66.3333 39.0452 65.5 38.564 65.5 37.7942L65.5 22.2058C65.5 21.436 66.3333 20.9548 67 21.3397L80.5 29.134Z" fill="#00AEF0"/>
                            </svg> 
                        </div>
                    </div> 
                </div> 

                <div class="reviews_block">
                    <div class="item">  
                        <a href="<?php echo esc_url($link_info); ?>">
                            <div class="item_vn"> 

                                <?php 
                                if ( $img_info_id ) : 
                                    $img_info_url = wp_get_attachment_url( $img_info_id, 'full' );
                                ?>
                                    <img src="<?php echo $img_info_url; ?>" alt="<?php echo esc_attr($title_info); ?>"> 
                                <?php endif; ?>

                                <?php if ( $title_info || $desc_info ) : ?>
                                    <div class="item_desc">
                                        <div class="item_title">
                                            <?php echo $title_info; ?>
                                        </div>
                                        <div class="item_title_desc">
                                            <?php echo $desc_info; ?>
                                        </div>  
                                    </div> 
                                <?php endif; ?>

                            </div> 
                        </a> 
                    </div>
                </div>

            </div>
        </div> 
    </div>

<?php endif; ?>


